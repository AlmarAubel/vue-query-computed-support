<script setup lang="ts">
import {getUser} from './UserApi';
import {useQuery} from '@tanstack/vue-query';

const userId = "1";
//

var {data, isLoading, status, isFetching, isStale} = useQuery({
  queryKey: ["users", userId],
  queryFn: () => getUser(userId),
  select: resp => resp,
  staleTime: 1000 * 6
});
</script>

<template>
  <div> status: {{ status }}</div>
  <div>isFetching: {{ isFetching ? "ğŸŸ¢": "ğŸš«"  }}</div>
  <div>freshness: {{ isStale ? "Stale" : "fresh" }}</div>

  <div v-if="isLoading">loading</div>
  <div v-else>
    <pre>{{ data }} </pre>
  </div>
</template>


<!--select: data=> {throw new Error("Foutje in select")},-->
<!--onError: err=> console.log('err', err)-->